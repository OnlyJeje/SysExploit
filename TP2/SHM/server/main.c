#include "include.h"

int main(int ac, char *av)
{
  FILE *fd;
  int shm_id;
  key_t key = 123;
  char *shmt;

  if ((shm_id = shmget(key, 4, IPC_CREAT | 0666)) == -1)
    {
      printf("SHMGET: %s\n", strerror(errno));
      return (-1);
    }
  if ((shmt = shmat(shm_id, 0,0)) == (void *)-1)
    {
      printf("SHMAT: %s\n", strerror(errno));
      return (-1);
    }
    printf("%s\n", shmt);
    
    fd = fopen("recv.txt", "a");

    fprintf(fd, "%s", shmt);
    printf("fprintf: %s\n", strerror(errno));
    fclose(fd);
    
    //    shmctl(shm_id, IPC_RMID, NULL);
    shmdt(shmt);
}
